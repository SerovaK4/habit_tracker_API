# Трекер привычек: бэкенд-часть SPA веб-приложения


## Задачи

1. Настроен CORS.
2. Настроена интеграция с Telegram.
3. Реализована пагинация (с выводом по 5 привычек на страницу).
4. Реализованы валидаторы:
   + Время выполнения должно быть не больше 120 секунд.
   + Исключен одновременный выбор связанной привычки и указания вознаграждения.
   + В связанные привычки могут попадать только привычки с признаком приятной привычки.
   + У приятной привычки не может быть вознаграждения или связанной привычки.
   + Нельзя выполнять привычку реже, чем 1 раз в 7 дней.
    
5. Описаны права доступа:
   + Каждый пользователь имеет доступ только к своим привычкам по механизму CRUD.
   + Пользователь может видеть список публичных привычек без возможности их как-то редактировать или удалять.

6. Настроена отложенная задача через Celery.
7. Имеется список зависимостей.

8. Эндпоинты:
        Регистрация и авторизация пользователя
        Список привычек текущего пользователя с пагинацией
        Список публичных привычек
        Создание, редкатирование и удаление привычки

9. !Настроийть тестирование!


## Описание/требования


База данных - Postgresql

Стек технологий: 
+ Python;
+ Django;
+ Celery;
+ JWT, DRF-YASG;
+ DRF

С применением ООП (Классы)



## Настройка

Первое, что нужно сделать, это клонировать репозиторий:

    $ git clone https://github.com/gocardless/sample-django-app.git
    $ cd sample-django-app

Создайте виртуальную среду для установки зависимостей и активируйте ее:

    $ virtualenv2 --no-site-packages env
    $ source env/bin/activate

Затем установите зависимости:

    (env)$ pip3 install -r requirements.txt


## Настройка переменных окружения
Для работы с переменными окружениями необходимо в проекте создать файл .env и заполнить его по типу файла .env.example:

+ SECRET_KEY

+ EMAIL_HOST_USER
+ EMAIL_HOST_PASSWORD

+ POSTGRES_PASSWORD

+ API_KEY
+ API_URL

+ TELEGRAM_BOT_API_KEY

Для создания образа из Dockerfile и запуска контейнера запустить команду:

    docker-compose up --build

также можно запустить в фоновом режиме:

    docker-compose up -d --build


Для выполнения миграций:

    python3 manage.py migrate


Для создания администратора запустить команду:
    
    python3 manage.py ccsu


Для запуска redis:

    redis-cli


Для запуска celery:

    celery -A config worker --loglevel=info


Для запуска django-celery-beat:_

    celery -A config beat --loglevel=info


Для тестирования проекта запустить команду:

    python3 manage.py test

Для запуска подсчета покрытия и вывода отчет запустить команды:_


    coverage run --source='.' manage.py test

    coverage report


